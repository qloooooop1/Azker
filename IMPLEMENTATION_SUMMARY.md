# ููุฎุต ุงูุชุญุณููุงุช - Webhook ุนูู Render

## โ ุชู ุชุทุจูู ุฌููุน ุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ

### 1. ุชุนุฒูุฒ ุงุณุชุฑุงุชูุฌูุฉ Logging โ
- โ Log ุดุงูู ููุทูุจุงุช ุงููุงุฑุฏุฉ ูุน ุญูุงูุฉ ุงูุฎุตูุตูุฉ
- โ ุชุณุฌูู ุฃููุงุช ูุนุงูุฌุฉ ุงูุทูุจุงุช ุจุฏูุฉ
- โ Log ูุนูููุงุช ุฅุนุฏุงุฏ/ุญุฐู webhook
- โ ุงูุชุญูู ูู secret token ุจุฏูู ูุดู ุงูููู

### 2. ููุน Spin-Down ุนูู Render โ
- โ Keep-alive mechanism (ูู 5 ุฏูุงุฆู)
- โ Initialization ุขูู ูุน null check
- โ ุชูุธูู ุงูู interval ุนูุฏ ุงูุฅููุงู
- โ ุชูุตูุฉ ุจุงุณุชุฎุฏุงู ุฎุฏูุงุช ูุฑุงูุจุฉ ุฎุงุฑุฌูุฉ

### 3. ุงูุชุฃูุฏ ูู ุฌุงูุฒูุฉ Domain โ
- โ ุฏุงูุฉ checkDomainReady()
- โ ูุจูู ุฌููุน 2xx status codes
- โ ุขููุฉ retry ูุน ุงูุชุธุงุฑ 3 ุซูุงูู
- โ fallback ุฅูู polling

### 4. ุงูุฃูุงู ูุงูููุซูููุฉ โ
- โ Secret token ุซุงุจุช (hash ูู bot token)
- โ ูุนุงูุฌุฉ ุงูุชุญุฏูุซ ูุจู ุฅุฑุณุงู 200
- โ ุฅุฑุณุงู 500 ุนูุฏ ุงููุดู ููุณูุงุญ ุจุฅุนุงุฏุฉ ุงููุญุงููุฉ
- โ ุญูุงูุฉ ุงูุฎุตูุตูุฉ ูู logs

### 5. ุงูุชูุซูู โ
- โ WEBHOOK_IMPROVEMENTS_2026.md ุดุงูู
- โ ุฃูุซูุฉ ูุงุถุญุฉ
- โ ุฌุฏูู ุงูุฃุฎุทุงุก ูุงูุญููู
- โ ุชูุตูุงุช ููุฅูุชุงุฌ

## ๐ ูุชุงุฆุฌ ุงููุญุต ุงูุฃููู
- โ **CodeQL**: ูู ูุชู ุงูุนุซูุฑ ุนูู ุซุบุฑุงุช ุฃูููุฉ (0 alerts)
- โ **Code Review**: ุชู ูุนุงูุฌุฉ ุฌููุน ุงูููุงุญุธุงุช ุงูุญุฑุฌุฉ

## ๐ ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ

### server.js
1. **Secret Token**: ุงุณุชุฎุฏุงู hash ุซุงุจุช ูู bot token ุจุฏูุงู ูู ุนุดูุงุฆู
2. **Webhook Endpoint**: ูุนุงูุฌุฉ ุขููุฉ ูุน privacy protection
3. **Domain Check**: ูุจูู ุฌููุน 2xx status codes
4. **Keep-alive**: initialization ูุญุณูู ูุน ุชูุตูุงุช

### WEBHOOK_IMPROVEMENTS_2026.md
1. ุชูุซูู ุดุงูู ูุฌููุน ุงูุชุญุณููุงุช
2. ุฃูุซูุฉ ูุงุถุญุฉ ููู logs ุงููุชููุนุฉ
3. ุฌุฏูู ุงูุฃุฎุทุงุก ูุงูุญููู
4. ููุงุญุธุงุช ูููุฉ ุญูู ุงูุฃูุงู ูุงูุฎุตูุตูุฉ
5. ุชูุตูุงุช ููุฅูุชุงุฌ

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ููุซูููุฉ
- ุนุฏู ููุฏุงู ุงูุชุญุฏูุซุงุช (ูุนุงูุฌุฉ ุซู ุฑุฏ)
- fallback ุชููุงุฆู ุฅูู polling
- keep-alive ูููุน spin-down

### ุฃูุงู
- Secret token ุซุงุจุช ููุดูุฑ
- ุนุฏู ูุดู tokens ูู logs
- ุญูุงูุฉ ูู ุทูุจุงุช ุบูุฑ ูุตุฑุญ ุจูุง

### ุฎุตูุตูุฉ
- ุนุฏู ุชุณุฌูู ูุญุชูู ุงูุฑุณุงุฆู
- ุชุณุฌูู metadata ููุท (ููุน ุงูุชุญุฏูุซุ user ID)
- logs ุขููุฉ ููููุฏุฉ

### ูุฑุงูุจุฉ
- Logs ูุงุถุญุฉ ูุน emojis
- Timestamps ุฏูููุฉ
- ุชุชุจุน ุณูู ูููุดุงูู

## ๐ ุฌุงูุฒ ููุฅูุชุงุฌ

ุงูุจูุช ุงูุขู ุฌุงูุฒ ููุนูู ุนูู Render ุจุดูู ููุซูู ูุขูู ูุน:
- โ Webhook ูุณุชูุฑ
- โ Logging ุดุงูู ูุขูู
- โ ุญูุงูุฉ ูู spin-down
- โ fallback ุชููุงุฆู
- โ ุฃูุงู ูุฎุตูุตูุฉ ูุญุณููุฉ
- โ ุจุฏูู ุซุบุฑุงุช ุฃูููุฉ

## ๐ ูุชุทูุจุงุช ุงูุชุทุจูู

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
USE_WEBHOOK=true
WEBHOOK_URL=https://your-service-name.onrender.com
WEBHOOK_SECRET=your_long_random_secret_32_chars_min
```

### ุงูุชูุตูุงุช ููุฅูุชุงุฌ
1. ุงุณุชุฎุฏุงู WEBHOOK_SECRET ุตุฑูุญ (32+ ุญุฑู)
2. ุงุณุชุฎุฏุงู ุฎุฏูุฉ ูุฑุงูุจุฉ ุฎุงุฑุฌูุฉ (UptimeRobot)
3. ูุฑุงูุจุฉ logs ุจุงูุชุธุงู ูู ุงูุฃูุงู ุงูุฃููู
4. ุงุณุชุฎุฏุงู Render Persistent Disk ููุจูุงูุงุช

## ๐ ูุง ุงูุชุงููุ

1. ุงุฎุชุจุงุฑ ุงูุชุทุจูู ูู ุจูุฆุฉ staging
2. ูุฑุงูุจุฉ ุงูู logs ูุจุถุนุฉ ุฃูุงู
3. ุฅุนุฏุงุฏ external monitoring
4. ุชุญุณููุงุช ุฅุถุงููุฉ ุญุณุจ ุงูุญุงุฌุฉ
